<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>태양광 발전량 계산기</title>
<style>
body {
  font-family: 'Pretendard','Noto Sans KR',sans-serif;
  background:#f8fafc;
  margin:0;
  padding:40px;
}
.container {
  max-width:550px;
  margin:auto;
  background:white;
  border-radius:14px;
  padding:35px 40px;
  box-shadow:0 4px 18px rgba(0,0,0,0.08);
}
h2 {
  text-align:center;
  color:#1d3557;
  margin-bottom:30px;
}
label {
  font-weight:600;
  display:block;
  margin-top:12px;
  color:#333;
}
input, select {
  width:100%;
  padding:10px;
  margin-top:5px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:15px;
}
.panel-size {
  display:flex;
  align-items:center;
  gap:10px;
}
.panel-size input { flex:1; text-align:center; }
.panel-size span { font-weight:bold; color:#333; }
.result-box {
  background:#eef3ff;
  padding:15px;
  border-radius:10px;
  margin-top:25px;
  color:#333;
  line-height:1.7;
  font-size:15px;
}
button {
  margin-top:25px;
  width:100%;
  background:#457b9d;
  color:white;
  font-size:16px;
  padding:12px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:bold;
  transition:0.2s;
}
button:hover { background:#1d3557; }
</style>
</head>
<body>
<div class="container">
  <h2>태양광 발전량 계산기</h2>

  <label for="site">부지 선택</label>
  <select id="site">
    <option value="">-- 선택하세요 --</option>
    <option value="산업단지">산업단지</option>
    <option value="주차장">주차장</option>
    <option value="철도 유휴부지">철도 유휴부지</option>
  </select>

  <label>패널 크기 (mm)</label>
  <div class="panel-size">
    <input type="number" id="width" placeholder="가로(mm)">
    <span>×</span>
    <input type="number" id="height" placeholder="세로(mm)">
  </div>

  <label for="power">모듈 최대출력 (W)</label>
  <input type="number" id="power" placeholder="예: 600">

  <label for="invest">투자 금액 (원)</label>
  <input type="number" id="invest" placeholder="예: 500000000">

  <label for="support">지원 금액 (원)</label>
  <input type="number" id="support" placeholder="예: 100000000">

  <div class="result-box" id="calcResult">입력값을 모두 입력하면 계산 결과가 여기에 표시됩니다.</div>

  <button onclick="goToResult()">그래프 보기</button>
</div>

<script>
const siteData = {
  "산업단지": { area: 7718419, irradiance: 1175.34050058504 },
  "주차장": { area: 241197, irradiance: 1074.80274452513 },
  "철도 유휴부지": { area: 72040, irradiance: 1079.24847564316 }
};

function updateCalculation() {
  const site = document.getElementById('site').value;
  const width = parseFloat(document.getElementById('width').value);
  const height = parseFloat(document.getElementById('height').value);
  const power = parseFloat(document.getElementById('power').value);
  const resultDiv = document.getElementById('calcResult');

  if (!site) {
    resultDiv.innerHTML = "부지를 선택하세요.";
    return;
  }

  const { area, irradiance } = siteData[site];
  if (!width || !height || !power) {
    resultDiv.innerHTML = `선택된 부지: <b>${site}</b><br>면적: ${area.toLocaleString()}㎡<br>패널 크기와 출력값을 입력해주세요.`;
    return;
  }

  const panelArea = (width / 1000) * (height / 1000);
  const moduleCount = Math.floor(area / panelArea);
  const totalKW = moduleCount * (power / 1000);
  const annualEnergy = totalKW * irradiance;

  resultDiv.innerHTML = `
    선택된 부지: <b>${site}</b><br>
    발전면적: ${area.toLocaleString()} ㎡<br>
    패널 크기: ${panelArea.toFixed(2)} ㎡<br>
    모듈 수: ${moduleCount.toLocaleString()}개<br>
    총 용량: ${totalKW.toLocaleString(undefined,{maximumFractionDigits:1})} kW<br>
    예상 연간 발전량: ${annualEnergy.toLocaleString(undefined,{maximumFractionDigits:0})} kWh
  `;
}

["site","width","height","power"].forEach(id=>{
  document.getElementById(id).addEventListener('input',updateCalculation);
});

function goToResult() {
  const site=document.getElementById('site').value;
  const width=document.getElementById('width').value;
  const height=document.getElementById('height').value;
  const power=document.getElementById('power').value;
  const invest=document.getElementById('invest').value;
  const support=document.getElementById('support').value;

  if(!site||!width||!height||!power){alert("모든 값을 입력하세요!");return;}

  window.location.href=`result.html?site=${site}&width=${width}&height=${height}&power=${power}&invest=${invest}&support=${support}`;
}
</script>
</body>
</html>
