<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>태양광 발전량 계산기</title>
<style>
body {
	font-family: 'Pretendard','Noto Sans KR',sans-serif;
	background:#f8fafc;
	margin:0;
	padding:10px; /* ✅ body 여백 최소화 */
}
.container {
	max-width:280px; /* ✅ 최종 컨테이너 최대 너비 280px로 최소화 */
	margin:auto;
	background:white;
	border-radius:10px; /* 둥근 모서리 소폭 축소 */
	padding:15px; /* ✅ 컨테이너 내부 여백 최소화 */
	box-shadow:0 2px 10px rgba(0,0,0,0.1); /* 그림자 조정 */
}
h2 {
	text-align:center;
	color:#1d3557;
	margin-bottom:15px; /* 마진 조정 */
	font-size:1.1em; /* ✅ 제목 글씨 크기 조정 */
}
label {
	font-weight:600;
	display:block;
	margin-top:10px; /* 마진 조정 */
	color:#333;
	font-size:0.9em; /* ✅ 라벨 글씨 크기 조정 */
}
input, select {
	width:100%;
	padding:7px; /* ✅ 입력 필드 패딩 축소 */
	margin-top:4px;
	border-radius:5px;
	border:1px solid #ccc;
	font-size:0.9em; /* ✅ 입력 필드 글씨 크기 조정 */
}
.panel-size {
	display:flex;
	align-items:center;
	gap:5px; /* ✅ 간격 축소 */
}
.panel-size input { flex:1; text-align:center; }
.panel-size span { font-weight:bold; color:#333; }
.result-box {
	background:#eef3ff;
	padding:10px; /* ✅ 결과 박스 패딩 축소 */
	border-radius:8px;
	margin-top:15px; /* 마진 조정 */
	color:#333;
	line-height:1.5; /* ✅ 줄 간격 조정 */
	font-size:0.8em; /* ✅ 결과 박스 글씨 크기 축소 */
}
button {
	margin-top:15px;
	width:100%;
	background:#457b9d;
	color:white;
	font-size:1em;
	padding:9px; /* ✅ 버튼 패딩 축소 */
	border:none;
	border-radius:6px;
	cursor:pointer;
	font-weight:bold;
	transition:0.2s;
}
button:hover { background:#1d3557; }
</style>
</head>
<body>
<div class="container">
	<h2>태양광 발전량 계산기</h2>

	<label for="site">부지 선택</label>
	<select id="site">
		<option value="">-- 선택하세요 --</option>
		<option value="산업단지">산업단지</option>
		<option value="주차장">주차장</option>
		<option value="철도 유휴부지">철도 유휴부지</option>
	</select>

	<label>패널 크기 (mm)</label>
	<div class="panel-size">
		<input type="number" id="width" placeholder="가로(mm)">
		<span>×</span>
		<input type="number" id="height" placeholder="세로(mm)">
	</div>

	<label for="power">모듈 최대출력 (W)</label>
	<input type="number" id="power" placeholder="예: 600">

	<label for="invest">투자 금액 (원)</label>
	<input type="number" id="invest" placeholder="예: 500,000,000">

	<label for="support">지원 금액 (원)</label>
	<input type="number" id="support" placeholder="예: 100,000,000">

	<div class="result-box" id="calcResult">입력값을 모두 입력하면 계산 결과가 여기에 표시됩니다.</div>

	<button onclick="goToResult()">그래프 보기</button>
</div>

<script>
const siteData = {
	"산업단지": { area: 7718419, irradiance: 1175.34050058504 },
	"주차장": { area: 241197, irradiance: 1074.80274452513 },
	"철도 유휴부지": { area: 72040, irradiance: 1079.24847564316 }
};

function updateCalculation() {
	const site = document.getElementById('site').value;
	const width = parseFloat(document.getElementById('width').value);
	const height = parseFloat(document.getElementById('height').value);
	const power = parseFloat(document.getElementById('power').value);
	const resultDiv = document.getElementById('calcResult');

	if (!site) {
		resultDiv.innerHTML = "부지를 선택하세요.";
		return;
	}

	const { area, irradiance } = siteData[site];
	if (!width || !height || !power) {
		resultDiv.innerHTML = `선택된 부지: <b>${site}</b><br>면적: ${area.toLocaleString()}㎡<br>패널 크기와 출력값을 입력해주세요.`;
		return;
	}

	const panelArea = (width / 1000) * (height / 1000);
	const moduleCount = Math.floor(area / panelArea);
	const totalKW = moduleCount * (power / 1000);
	const annualEnergy = totalKW * irradiance;

	resultDiv.innerHTML = `
		선택된 부지: <b>${site}</b><br>
		발전면적: ${area.toLocaleString()} ㎡<br>
		패널 크기: ${panelArea.toFixed(2)} ㎡<br>
		모듈 수: ${moduleCount.toLocaleString()}개<br>
		총 용량: ${totalKW.toLocaleString(undefined,{maximumFractionDigits:1})} kW<br>
		예상 연간 발전량: ${annualEnergy.toLocaleString(undefined,{maximumFractionDigits:0})} kWh
	`;
}

["site","width","height","power"].forEach(id=>{
	document.getElementById(id).addEventListener('input',updateCalculation);
});

function goToResult() {
	const site=document.getElementById('site').value;
	const width=document.getElementById('width').value;
	const height=document.getElementById('height').value;
	const power=document.getElementById('power').value;
	const invest=document.getElementById('invest').value;
	const support=document.getElementById('support').value;

	if(!site||!width||!height||!power){alert("모든 값을 입력하세요!");return;}

	window.location.href=`result.html?site=${site}&width=${width}&height=${height}&power=${power}&invest=${invest}&support=${support}`;
}
</script>
</body>
</html>
