<!DOCTYPE html>
<html lang="ko">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>ì—ë„ˆì§€ì›ë³„ ë°œì „ëŸ‰ ë° ê°ì¶• ê¸°ì—¬ë„ ë¶„ì„</title>
Â  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
Â  <style>
Â  Â  body {
Â  Â  Â  font-family: "Pretendard", sans-serif;
Â  Â  Â  background-color: #f6f8fa;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  align-items: center;
Â  Â  Â  padding: 20px;
Â  Â  Â  color: #1d3557;
Â  Â  }

Â  Â  .card {
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 16px;
Â  Â  Â  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
Â  Â  Â  padding: 24px;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  width: 360px;
Â  Â  Â  text-align: center;
Â  Â  }

Â  Â  h2 {
Â  Â  Â  font-size: 18px;
Â  Â  Â  font-weight: 700;
Â  Â  Â  margin-bottom: 14px;
Â  Â  }

Â  Â  .btn-container {
Â  Â  Â  display: flex;
Â  Â  Â  justify-content: center;
Â  Â  Â  gap: 10px;
Â  Â  Â  margin-top: 12px;
Â  Â  }

Â  Â  .btn {
Â  Â  Â  background: #1d3557;
Â  Â  Â  color: white;
Â  Â  Â  border: none;
Â  Â  Â  padding: 8px 14px;
Â  Â  Â  border-radius: 6px;
Â  Â  Â  font-size: 13px;
Â  Â  Â  cursor: pointer;
Â  Â  Â  transition: 0.2s;
Â  Â  }

Â  Â  .btn:hover {
Â  Â  Â  background: #457b9d;
Â  Â  }

Â  Â  canvas {
Â  Â  Â  width: 100% !important;
Â  Â  }

Â  Â  /* âœ… ê·¸ë˜í”„ë³„ ì„¸ë¡œ ë¹„ìœ¨ í†µì¼ ë° ì¡°ì • */
Â  Â  #powerChart {
Â  Â  Â  height: 270px !important;
Â  Â  }

Â  Â  #contributionChart {
Â  Â  Â  height: 270px !important; /* ğŸ”¹ powerChartì™€ ë™ì¼í•œ ë†’ì´ë¡œ í†µì¼ */
Â  Â  }

Â  Â  .summary {
Â  Â  Â  margin-top: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  line-height: 1.6;
Â  Â  Â  color: #1d3557;
Â  Â  }

Â  Â  .summary span {
Â  Â  Â  font-weight: 700;
Â  Â  Â  color: #e63946;
Â  Â  }
Â  </style>
</head>
<body>
Â  Â  <div class="card">
Â  Â  <h2>ì—ë„ˆì§€ì›ë³„ ë°œì „ëŸ‰ ì˜í–¥ ë¶„ì„</h2>
Â  Â  <canvas id="powerChart"></canvas>
Â  Â  <div class="btn-container">
Â  Â  Â  <button class="btn">ê¸°ì¡´ í˜„í™© ë³´ê¸°</button>
Â  Â  Â  <button class="btn">íƒœì–‘ê´‘ ë°œì „ëŸ‰ ì¶”ê°€</button>
Â  Â  </div>
Â  </div>

Â  Â  <div class="card">
Â  Â  <h2>ì¸ì²œì‹œ 2030ë…„ ëª©í‘œ ëŒ€ë¹„ ê°ì¶• ê¸°ì—¬ë„</h2>
Â  Â  <canvas id="contributionChart"></canvas>
Â  Â  <div class="summary">
Â  Â  Â  <strong>ëª©í‘œ ê°ì¶•ëŸ‰ (2018ë…„ ëŒ€ë¹„ 31.0%):</strong>
Â  Â  Â  <span>4,927.36 ktCO2e</span><br>
Â  Â  Â  íƒœì–‘ê´‘ ì˜ˆìƒ ê°ì¶•ëŸ‰: <span>957.36 ktCO2e</span>
Â  Â  </div>
Â  </div>

Â  <script>
Â  Â  // Chart.js ì¤‘ì•™ í…ìŠ¤íŠ¸ í”ŒëŸ¬ê·¸ì¸ ì •ì˜
Â  Â  const centerTextPlugin = {
Â  Â  Â  id: 'centerText',
Â  Â  Â  beforeDraw: (chart) => {
Â  Â  Â  Â  if (chart.canvas.id === 'powerChart' && chart.options.plugins.centerText.enabled) {
Â  Â  Â  Â  Â  const increaseValue = 2002.43; // JS ì½”ë“œ ìƒë‹¨ì— ì •ì˜ëœ ê°’ ì‚¬ìš©
Â  Â  Â  Â    const { ctx, chartArea: { width, height } } = chart;
Â  Â  Â  Â    const centerX = width / 2;
Â  Â  Â  Â    const centerY = height / 2 + 10;
Â  Â  Â  Â    ctx.save();
Â  Â  Â  Â    ctx.font = '700 18px Pretendard';
Â  Â  Â  Â    ctx.fillStyle = '#2e7d32';
Â  Â  Â  Â    ctx.textAlign = 'center';
Â  Â  Â  Â    ctx.textBaseline = 'middle';
Â  Â  Â  Â    ctx.fillText(`+${increaseValue.toLocaleString(undefined, { maximumFractionDigits: 2 })} GWh`, centerX, centerY);
Â  Â  Â  Â    ctx.restore();
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  };
Â  
Â  Â  // -------------------- ìƒë‹¨ ë„ë„› --------------------
    const dataInitial = [1200, 1900, 3000, 2500, 400, 300, 200];
    const dataAfter = [1200, 1900, 3000, 2500 + 2002.43, 400, 300, 200]; // ì‹ ì¬ìƒë§Œ ì¦ê°€
Â  Â  const increaseValue = 2002.43; // ì¦ê°€ëŸ‰

Â  Â  const powerCtx = document.getElementById('powerChart').getContext('2d');
Â  Â  const powerChart = new Chart(powerCtx, {
Â  Â  Â  type: 'doughnut',
Â  Â  Â  data: {
Â  Â  Â  Â  labels: ['ì›ìë ¥', 'ì„íƒ„', 'LNG', 'ì‹ ì¬ìƒ', 'ìœ ë¥˜', 'ì–‘ìˆ˜', 'ê¸°íƒ€'],
Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  data: dataAfter, // ì´ˆê¸° ìƒíƒœë¥¼ 'ì¶”ê°€' ìƒíƒœë¡œ ì„¤ì •
Â  Â  Â  Â  Â  backgroundColor: ['#a5d6a7', '#ffcc80', '#ffb74d', '#66bb6a', '#f48fb1', '#90caf9', '#cfd8dc'],
Â  Â  Â  Â  Â  borderWidth: 1,
Â  Â  Â  Â  }]
Â  Â  Â  },
Â  Â  Â  plugins: [centerTextPlugin],
Â  Â  Â  options: {
Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  maintainAspectRatio: true, // âœ… ì¢…íš¡ë¹„ ìœ ì§€ (ì •ì›)
Â  Â  Â  Â  cutout: '65%',
Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  legend: { position: 'top', labels: { font: { size: 12 } } },
Â  Â  Â  Â  Â  tooltip: { enabled: true },
          centerText: { enabled: true } // ì¤‘ì•™ í…ìŠ¤íŠ¸ í”ŒëŸ¬ê·¸ì¸ í™œì„±í™”
Â  Â  Â  Â  }
Â  Â  Â  },
Â  Â  });
    
    // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    const powerButtons = document.querySelector('.card:first-child .btn-container').querySelectorAll('.btn');
    powerButtons[0].addEventListener('click', () => { // ê¸°ì¡´ í˜„í™©
        powerChart.data.datasets[0].data = dataInitial;
        powerChart.options.plugins.centerText.enabled = false;
        powerChart.update();
    });
    powerButtons[1].addEventListener('click', () => { // íƒœì–‘ê´‘ ì¶”ê°€
        powerChart.data.datasets[0].data = dataAfter;
        powerChart.options.plugins.centerText.enabled = true;
        powerChart.update();
    });

Â  
Â  Â  // -------------------- í•˜ë‹¨ ë„ë„› --------------------
Â  Â  const contributionCtx = document.getElementById('contributionChart').getContext('2d');
Â  Â  new Chart(contributionCtx, {
Â  Â  Â  type: 'doughnut',
Â  Â  Â  data: {
Â  Â  Â  Â  labels: ['íƒœì–‘ê´‘ ê°ì¶• ê¸°ì—¬', 'ì¶”ê°€ ê°ì¶• ëª©í‘œëŸ‰'],
Â  Â  Â  Â  datasets: [{
Â  Â  Â  Â  Â  data: [957.36, 4927.36 - 957.36],
Â  Â  Â  Â  Â  backgroundColor: ['#66bb6a', '#f2c879'],
Â  Â  Â  Â  Â  borderWidth: 1,
Â  Â  Â  Â  }]
Â  Â  Â  },
Â  Â  Â  options: {
Â  Â  Â  Â  responsive: true,
Â  Â  Â  Â  maintainAspectRatio: true, // âœ… ì¢…íš¡ë¹„ ìœ ì§€ (ì •ì›)
Â  Â  Â  Â  cutout: '60%',
Â  Â  Â  Â  plugins: {
Â  Â  Â  Â  Â  legend: { position: 'top', labels: { font: { size: 12 } } },
Â  Â  Â  Â  Â  tooltip: {
Â  Â  Â  Â  Â  Â  callbacks: {
Â  Â  Â  Â  Â  Â  Â  label(context) {
Â  Â  Â  Â  Â  Â  Â  Â  const label = context.label || '';
Â  Â  Â  Â  Â  Â  Â  Â  const value = context.parsed;
Â  Â  Â  Â  Â  Â  Â  Â  const total = context.dataset.data.reduce((a, b) => a + b, 0);
Â  Â  Â  Â  Â  Â  Â  Â  const percent = (value / total * 100).toFixed(1);
Â  Â  Â  Â  Â  Â  Â  Â  return `${label}: ${value.toLocaleString()} ktCO2e (${percent}%)`;
Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  });
Â  </script>
</body>
</html>
